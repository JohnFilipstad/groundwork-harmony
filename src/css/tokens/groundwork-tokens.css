/* ========================================================================
   ðŸŽ¶ GROUNDWORK HARMONY - MAIN TOKENS
   ========================================================================
   VERSION: FINAL-COMPLETE-V3
   DESCRIPTION: The complete, final token file for the Groundwork Harmony
   design system. It combines a static foundational palette with a
   powerful dynamic theming engine and a full set of structural tokens.
*/

/* ========================================================================
   1. IMPORTS
   - Imports the auto-generated foundational palettes and dynamic theme base.
   ======================================================================== */
@import url("groundwork-colors.css"); /* Static palettes (red, green, etc.) */
@import url("groundwork-theme-base.css"); /* Dynamic HSL components (primary, etc.) */

:root {
  /* ========================================================================
     2. SEMANTIC & FUNCTIONAL ALIASES
     - Maps roles to specific colors from the imported palettes.
     ======================================================================== */

  /* --- Dynamic Theme Colors (User-Customizable) --- */
  --color-primary: var(--color-primary-600);
  --color-secondary: var(--color-secondary-600);
  --color-accent: var(--color-accent-600);

  /* --- Static Functional Colors (Fixed) --- */
  --color-success: var(--color-green-600);
  --color-danger: var(--color-red-600);
  --color-warning: var(--color-yellow-500);
  --color-info: var(--color-cyan-600);
  --color-muted: var(--color-grey-600);

  /* --- Core Text Colors (The two main options) --- */
  --color-text-on-dark: hsl(0deg 0% 100% / 0.87);
  --color-text-on-light: hsl(0deg 0% 10% / 0.87);

  /* --- Paired Text Colors for Functional Roles --- */
  --color-success-text: var(--color-green-600-text);
  --color-danger-text: var(--color-red-600-text);
  --color-warning-text: var(--color-yellow-500-text);
  --color-info-text: var(--color-cyan-600-text);
  --color-muted-text: var(--color-grey-600-text);

  /* ========================================================================
     3. STRUCTURAL & TYPOGRAPHIC TOKENS
     ======================================================================== */

  /* --- Font Families --- */
  --font-family-sans: "Groundwork Sans", system-ui, sans-serif;
  --font-family-serif: "Groundwork Serif", ui-serif, serif;
  --font-family-mono: "Lucida Console", monaco, monospace;
  --font-family-base: var(--font-family-serif);
  --font-family-headings: var(--font-family-sans);

  /* --- Modular Scale Ratios for Font Sizes (User can choose the scale type) --- */
  --scale-minor-second: 1.067;
  --scale-major-second: 1.125;
  --scale-minor-third: 1.2;
  --scale-major-third: 1.25;
  --scale-perfect-fourth: 1.333;
  --scale-augmented-fourth: 1.414;
  --scale-perfect-fifth: 1.5;
  --scale-golden-section: 1.618;
  --scale-major-sixth: 1.667;
  --scale-minor-seventh: 1.778;
  --scale-major-seventh: 1.875;
  --scale-octave: 2;

  /* --- Modular Scale implementation in font-sizes (1rem = 10px) --- */
  --font-size-scale-base: 1.6rem;
  --scale-type: var(--scale-perfect-fourth); /* 1.333 */
  --font-size-m: var(--font-size-scale-base);
  --font-size-s: calc(var(--font-size-m) / var(--scale-type));
  --font-size-xs: calc(var(--font-size-s) / var(--scale-type));
  --font-size-l: calc(var(--font-size-m) * var(--scale-type));
  --font-size-xl: calc(var(--font-size-l) * var(--scale-type));
  --font-size-xxl: calc(var(--font-size-xl) * var(--scale-type));
  --font-size-xxxl: calc(var(--font-size-xxl) * var(--scale-type));

  /* --- Font Weights --- */
  --font-weight-light: 300;
  --font-weight-normal: 400;
  --font-weight-medium: 500;
  --font-weight-semibold: 600;
  --font-weight-bold: 700;
  --font-weight-black: 900;

  /* --- Letter Spacing --- */
  --letter-spacing-xs: -0.05em;
  --letter-spacing-s: -0.025em;
  --letter-spacing-m: 0;
  --letter-spacing-l: 0.025em;
  --letter-spacing-xl: 0.05em;
  --letter-spacing-xxl: 0.075em;
  --letter-spacing-xxxl: 0.1em;

  /* --- Line Heights --- */
  --line-height-tight: 1.2;
  --line-height-normal: 1.5;
  --line-height-relaxed: 1.625;

  /* --- Spacing --- */
  --spacing-0: 0;
  --spacing-xs: 0.4rem;
  --spacing-s: 0.8rem;
  --spacing-m: 1.6rem;
  --spacing-l: 2.4rem;
  --spacing-xl: 3.2rem;
  --spacing-xxl: 4.8rem;
  --spacing-xxxl: 6.4rem;

  /* --- Icon Sizing --- */
  --icon-size-s: 1.6rem;
  --icon-size-m: 2.4rem;
  --icon-size-l: 3.2rem;

  /* --- Borders & Radii --- */
  --border-radius-xs: 0.2rem;
  --border-radius-s: 0.4rem;
  --border-radius-m: 0.8rem;
  --border-radius-l: 1.2rem;
  --border-radius-full: 9999px;
  --border-width-thin: 1px;
  --border-width-m: 2px;
  --border-width-thick: 4px;

  /* --- Layout & Content Width --- */
  --content-width-s: 64rem;
  --content-width-m: 80rem;
  --container-max-width: 132rem;
  --z-index-dropdown: 1000;
  --z-index-modal: 1080;
  --z-index-toast: 1100;

  /* --- Transitions --- */
  --transition-duration-normal: 250ms;
  --transition-timing-ease: ease;
  --transition-normal: all var(--transition-duration-normal)
    var(--transition-timing-ease);
  --transition-transform: transform var(--transition-duration-normal)
    var(--transition-timing-ease);
  --transition-colors:
    color var(--transition-duration-normal) var(--transition-timing-ease),
    background-color var(--transition-duration-normal)
      var(--transition-timing-ease),
    border-color var(--transition-duration-normal) var(--transition-timing-ease);

  /* --- Dynamic Shadow & Focus Colors --- */
  --color-focus-ring: hsl(var(--color-primary-h) var(--color-primary-s) 50%);

  /* --- Semantic Shadows --- */
  --box-shadow-subtle: var(--box-shadow-xs);
  --box-shadow-elevated: var(--box-shadow-m);
  --box-shadow-floating: var(--box-shadow-l);

  /* ========================================================================
     4. LIGHT THEME (DEFAULT)
     ======================================================================== */

  /* --- Core Colors --- */
  --color-body: hsl(0deg 0% 98%); /* Near-white (vs. dark's 8%) */
  --color-text: var(--color-text-on-light); /* hsl(0deg 0% 0% / 0.87) */
  --color-text-inverse: var(
    --color-text-on-dark
  ); /* hsl(0deg 0% 100% / 0.87) */

  --color-text-disabled: hsl(
    0deg 0% 0% / 0.38
  ); /* Soft gray (vs. dark's 60%) */

  --border-color-default: hsl(0deg 0% 80%); /* Light gray (vs. dark's 25%) */
  --color-disabled: hsl(0deg 0% 90%); /* Very light fill (vs. dark's 20%) */

  /* --- Surfaces --- */
  --color-surface-base: hsl(0deg 0% 100%); /* Pure white (vs. dark's 12%) */
  --color-surface: var(--color-surface-base);
  --color-surface-light: hsl(
    0deg 0% 98%
  ); /* Slightly off-white (vs. dark's 18%) */

  --color-surface-dark: hsl(0deg 0% 95%); /* Light gray (vs. dark's 10%) */
  --color-surface-hover: hsl(0deg 0% 92%); /* Subtle hover (vs. dark's 20%) */
  --color-surface-inverse: hsl(0deg 0% 12%); /* Matches dark's base (12%) */

  /* --- Dynamic Links --- */
  --color-link: var(--color-primary-600); /* Standard link color */
  --color-link-hover: var(--color-primary-700); /* Slightly darker hover */
  --color-link-visited: var(--color-secondary-500); /* Muted visited state */

  /* --- Shadows --- */
  --color-shadow-base: hsl(var(--color-primary-h) 20% 40%);
  --box-shadow-xs: 0 1px 2px hsl(var(--color-shadow-base) / 0.08);
  --box-shadow-s:
    0 1px 3px hsl(var(--color-shadow-base) / 0.12),
    0 1px 2px hsl(var(--color-shadow-base) / 0.08);
  --box-shadow-m:
    0 4px 6px hsl(var(--color-shadow-base) / 0.1),
    0 2px 4px hsl(var(--color-shadow-base) / 0.08);
  --box-shadow-l:
    0 10px 15px hsl(var(--color-shadow-base) / 0.1),
    0 4px 6px hsl(var(--color-shadow-base) / 0.09);
  --box-shadow-xl:
    0 20px 25px hsl(var(--color-shadow-base) / 0.12),
    0 8px 10px hsl(var(--color-shadow-base) / 0.1);
  --box-shadow-focus: 0 0 0 3px hsl(var(--color-primary-h) 80% 60% / 0.4); /* Bright focus ring */

  /* --- Dynamic Tints --- */
  --color-surface-primary-tint: color-mix(
    in oklch,
    var(--color-primary) 15%,
    var(--color-body)
  );
  --color-surface-secondary-tint: color-mix(
    in oklch,
    var(--color-secondary) 15%,
    var(--color-body)
  );
  --color-surface-accent-tint: color-mix(
    in oklch,
    var(--color-accent) 15%,
    var(--color-body)
  );

  /* --- State Tints --- */
  --color-surface-danger-tint: color-mix(
    in oklch,
    var(--color-danger) 15%,
    var(--color-body)
  );
  --color-surface-success-tint: color-mix(
    in oklch,
    var(--color-success) 15%,
    var(--color-body)
  );
  --color-surface-info-tint: color-mix(
    in oklch,
    var(--color-info) 15%,
    var(--color-body)
  );
  --color-surface-warning-tint: color-mix(
    in oklch,
    var(--color-warning) 15%,
    var(--color-body)
  );
}

/* ========================================================================
   5. DARK THEME
   - Contains two separate rules to correctly handle OS preference
     and a manual toggle.
   ======================================================================== */

/* --- Rule 1: Applies when the user's OS is set to dark --- */
@media (prefers-color-scheme: dark) {
  :root:not([data-theme="light"]) {
    /* --- Core Colors --- */
    --color-body: hsl(0deg 0% 8%);
    --color-text: var(--color-text-on-dark); /* hsl(0deg 0% 100% / 0.87) */
    --color-text-inverse: var(
      --color-text-on-light
    ); /* hsl(0deg 0% 0% / 0.87) */

    --color-text-disabled: hsl(0deg 0% 100% / 0.38);
    --border-color-default: hsl(0deg 0% 25%);
    --color-disabled: hsl(0deg 0% 20%);

    /* --- Surfaces --- */
    --color-surface-base: hsl(0deg 0% 12%);
    --color-surface: var(--color-surface-base);
    --color-surface-light: hsl(0deg 0% 18%);
    --color-surface-dark: hsl(0deg 0% 10%);
    --color-surface-hover: hsl(0deg 0% 20%);
    --color-surface-inverse: hsl(0deg 0% 95%);

    /* --- Dynamic Links --- */
    --color-link: var(--color-primary-300); /* Lighter for visibility */
    --color-link-hover: var(--color-primary-300); /* Brighter hover */
    --color-link-visited: var(--color-secondary-300); /* Slightly darker */

    /* --- Shadows --- */
    --color-shadow-base: hsl(var(--color-primary-h) 20% 5%);
    --box-shadow-xs: 0 1px 2px hsl(var(--color-shadow-base) / 0.3);
    --box-shadow-s:
      0 1px 3px hsl(var(--color-shadow-base) / 0.3),
      0 1px 2px hsl(var(--color-shadow-base) / 0.2);
    --box-shadow-m:
      0 4px 6px hsl(var(--color-shadow-base) / 0.25),
      0 2px 4px hsl(var(--color-shadow-base) / 0.2);
    --box-shadow-l:
      0 10px 15px hsl(var(--color-shadow-base) / 0.25),
      0 4px 6px hsl(var(--color-shadow-base) / 0.22);
    --box-shadow-xl:
      0 20px 25px hsl(var(--color-shadow-base) / 0.25),
      0 8px 10px hsl(var(--color-shadow-base) / 0.22);
    --box-shadow-focus: 0 0 0 3px hsl(var(--color-primary-h) 60% 50% / 0.6); /* Glow effect */

    /* --- Dynamic Tints --- */
    --color-surface-primary-tint: color-mix(
      in oklch,
      var(--color-primary) 10%,
      var(--color-body)
    );
    --color-surface-secondary-tint: color-mix(
      in oklch,
      var(--color-secondary) 10%,
      var(--color-body)
    );
    --color-surface-accent-tint: color-mix(
      in oklch,
      var(--color-accent) 10%,
      var(--color-body)
    );

    /* --- State Tints --- */
    --color-surface-danger-tint: color-mix(
      in oklch,
      var(--color-danger) 10%,
      var(--color-body)
    );
    --color-surface-success-tint: color-mix(
      in oklch,
      var(--color-success) 10%,
      var(--color-body)
    );
    --color-surface-info-tint: color-mix(
      in oklch,
      var(--color-info) 10%,
      var(--color-body)
    );
    --color-surface-warning-tint: color-mix(
      in oklch,
      var(--color-warning) 10%,
      var(--color-body)
    );
  }
}

/* --- Rule 2: Applies when a user manually toggles dark mode --- */
:root[data-theme="dark"] {
  /* --- Core Colors --- */
  --color-body: hsl(0deg 0% 8%);
  --color-text: var(--color-text-on-dark); /* hsl(0deg 0% 100% / 0.87) */
  --color-text-inverse: var(--color-text-on-light); /* hsl(0deg 0% 0% / 0.87) */
  --color-text-disabled: hsl(0deg 0% 100% / 0.38);
  --border-color-default: hsl(0deg 0% 25%);
  --color-disabled: hsl(0deg 0% 20%);

  /* --- Surfaces --- */
  --color-surface-base: hsl(0deg 0% 12%);
  --color-surface: var(--color-surface-base);
  --color-surface-light: hsl(0deg 0% 18%);
  --color-surface-dark: hsl(0deg 0% 10%);
  --color-surface-hover: hsl(0deg 0% 20%);
  --color-surface-inverse: hsl(0deg 0% 95%);

  /* --- Dynamic Links --- */
  --color-link: var(--color-primary-300); /* Lighter for visibility */
  --color-link-hover: var(--color-primary-300); /* Brighter hover */
  --color-link-visited: var(--color-secondary-300); /* Slightly darker */

  /* --- Shadows --- */
  --color-shadow-base: hsl(var(--color-primary-h) 20% 5%);
  --box-shadow-xs: 0 1px 2px hsl(var(--color-shadow-base) / 0.3);
  --box-shadow-s:
    0 1px 3px hsl(var(--color-shadow-base) / 0.3),
    0 1px 2px hsl(var(--color-shadow-base) / 0.2);
  --box-shadow-m:
    0 4px 6px hsl(var(--color-shadow-base) / 0.25),
    0 2px 4px hsl(var(--color-shadow-base) / 0.2);
  --box-shadow-l:
    0 10px 15px hsl(var(--color-shadow-base) / 0.25),
    0 4px 6px hsl(var(--color-shadow-base) / 0.22);
  --box-shadow-xl:
    0 20px 25px hsl(var(--color-shadow-base) / 0.25),
    0 8px 10px hsl(var(--color-shadow-base) / 0.22);
  --box-shadow-focus: 0 0 0 3px hsl(var(--color-primary-h) 60% 50% / 0.6); /* Glow effect */

  /* --- Dynamic Tints --- */
  --color-surface-primary-tint: color-mix(
    in oklch,
    var(--color-primary) 10%,
    var(--color-body)
  );
  --color-surface-secondary-tint: color-mix(
    in oklch,
    var(--color-secondary) 10%,
    var(--color-body)
  );
  --color-surface-accent-tint: color-mix(
    in oklch,
    var(--color-accent) 10%,
    var(--color-body)
  );

  /* --- State Tints --- */
  --color-surface-danger-tint: color-mix(
    in oklch,
    var(--color-danger) 10%,
    var(--color-body)
  );
  --color-surface-success-tint: color-mix(
    in oklch,
    var(--color-success) 10%,
    var(--color-body)
  );
  --color-surface-info-tint: color-mix(
    in oklch,
    var(--color-info) 10%,
    var(--color-body)
  );
  --color-surface-warning-tint: color-mix(
    in oklch,
    var(--color-warning) 10%,
    var(--color-body)
  );
}
